generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Council {
  id           Int      @id @default(autoincrement())
  name         String
  isLiscencing Boolean? @default(false)
  bins         Bin[]
  methods      Method[]
  suburbs      Suburb[]
  users        User[]
}

model Suburb {
  postcode  String
  name      String
  councilId Int
  id        Int     @id @default(autoincrement())
  council   Council @relation(fields: [councilId], references: [id])
}

model User {
  id        Int       @id @default(autoincrement())
  userName  String
  councilId Int?
  role      UserRole?
  council   Council?  @relation(fields: [councilId], references: [id])
}

model Bin {
  id        Int      @id @default(autoincrement())
  colorCode String
  type      String
  image     String?
  can       String
  cannot    String
  councilId Int
  council   Council  @relation(fields: [councilId], references: [id])
  methods   Method[]
}

model Method {
  id        Int     @id @default(autoincrement())
  councilId Int
  itemId    Int
  method    String?
  binId     Int?
  note      String?
  bin       Bin?    @relation(fields: [binId], references: [id])
  council   Council @relation(fields: [councilId], references: [id])
  item      Item    @relation(fields: [itemId], references: [id])
}

model Item {
  id            Int          @id @default(autoincrement())
  name          String
  subCategoryId Int?
  code          String?
  subCategory   SubCategory? @relation(fields: [subCategoryId], references: [id])
  methods       Method[]
}

model SubCategory {
  id                Int             @id @default(autoincrement())
  name              String
  primaryMaterialId Int
  code              String?         @unique
  items             Item[]
  PrimaryMaterial   PrimaryMaterial @relation(fields: [primaryMaterialId], references: [id])
}

model PrimaryMaterial {
  id            Int           @id @default(autoincrement())
  name          String
  code          String?       @unique
  subCategories SubCategory[]
}

enum UserRole {
  USER
  ADMIN
  SUPERADMIN
}
